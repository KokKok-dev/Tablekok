spring:
  application:
    name: gateway-service
  profiles:
    active: dev
  config:
    import: "configserver:http://localhost:8888"

# ğŸ”‘ JWT ì„¤ì • (í† í° ê²€ì¦ìš© - User Serviceì™€ ë™ì¼í•œ ì„¤ì • ì‚¬ìš©)
jwt:
  secret: ${JWT_SECRET:tablekok-dev-secret-key-for-local-development-only}
  header: ${JWT_HEADER:Authorization}
  prefix: ${JWT_PREFIX:Bearer }

  # ğŸŒ Spring Cloud Gateway ë¼ìš°íŒ… ì„¤ì •
  cloud:
    gateway:
      routes:
        # User Service ë¼ìš°íŒ…
        - id: user-service
          uri: lb://user-service
          predicates:
            - Path=/v1/auth/**, /v1/users/**
          filters:
            - name: JwtAuthenticationFilter  # JWT ì¸ê°€ í•„í„° ì ìš©

        # Store Service ë¼ìš°íŒ… (í–¥í›„ ì¶”ê°€)
        - id: store-service
          uri: lb://store-service
          predicates:
            - Path=/v1/stores/**
          filters:
            - name: JwtAuthenticationFilter

        # Reservation Service ë¼ìš°íŒ… (í–¥í›„ ì¶”ê°€)
        - id: reservation-service
          uri: lb://reservation-service
          predicates:
            - Path=/v1/reservations/**
          filters:
            - name: JwtAuthenticationFilter

# ğŸ” Eureka í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
eureka:
  client:
    service-url:
      defaultZone: ${EUREKA_DEFAULT_ZONE:http://localhost:8761/eureka/}
  instance:
    prefer-ip-address: true